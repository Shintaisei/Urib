# URIV - デモモード使い方

## 🎯 デモモードについて

認証機能を無効化し、すぐに投稿・閲覧・いいね機能を試せるようになっています。

## 🚀 起動方法

### バックエンドとフロントエンドを別々に起動する場合：

**ターミナル1（バックエンド）:**
```bash
cd backend
source venv/bin/activate
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

**ターミナル2（フロントエンド）:**
```bash
npm run dev
```

### または一括起動スクリプトを使う：
```bash
./start-dev.sh
```

## 📱 アクセス方法

ブラウザで以下にアクセス：
- **フロントエンド**: http://localhost:3000 (または 3001)
- **バックエンドAPI**: http://localhost:8000
- **APIドキュメント**: http://localhost:8000/docs

## ✨ 利用可能な機能

### 🛒 マーケット機能
- ✅ **商品投稿** - 売ります/譲ります/求めます
- ✅ **商品一覧** - すべての投稿を閲覧
- ✅ **商品検索** - タイトル・説明・カテゴリで検索
- ✅ **フィルタリング** - タイプ・価格・状態で絞り込み
- ✅ **商品詳細** - 詳細情報を閲覧（閲覧数も記録される）
- ✅ **いいね機能** - 気になる商品にいいね
- ✅ **商品編集・削除** - 自分の投稿を編集・削除

### 📋 掲示板機能
- ✅ **投稿** - トピックを作成
- ✅ **閲覧** - 投稿一覧を表示
- ✅ **コメント** - 投稿に返信

### 💬 DM機能
- ✅ **ダイレクトメッセージ** - ユーザー間でメッセージ送信

## 🎭 デモユーザー

アプリにアクセスすると自動的に以下のデモユーザーでログインされます：
- **メールアドレス**: demo@hokudai.ac.jp
- **大学**: 北海道大学 (hokudai.ac.jp)
- **ユーザーID**: demo-user-1

## 📝 使い方

1. **http://localhost:3000** にアクセス
2. 自動的にホームページにリダイレクトされます
3. **マーケット**タブをクリック
4. 右上の「**出品する**」ボタンで商品を投稿
5. 投稿一覧から商品をクリックして詳細を表示
6. ハートマークでいいね！

## 🔧 開発モードの仕組み

### 自動ログイン
`app/page.tsx` で自動的にデモユーザー情報をローカルストレージに保存し、ホームページにリダイレクトします。

### 認証バイパス
- フロントエンド: `ProtectedRoute`は開発環境で常に認証済みとして扱う
- バックエンド: `X-Dev-Email`ヘッダーで開発用のユーザーを指定

### デモユーザー自動作成
バックエンド起動時に`demo@hokudai.ac.jp`のユーザーが自動的に作成されます。

## 🎨 カスタマイズ

デモユーザーを変更したい場合は、`app/page.tsx` を編集：

```typescript
localStorage.setItem('user_email', 'あなたのメール@大学.ac.jp')
localStorage.setItem('university', '大学ドメイン')
```

## 📚 認証機能を有効にしたい場合

1. `app/page.tsx` を元の `LoginForm` を使う実装に戻す
2. `lib/market-api.ts` と `lib/dm-api.ts` のヘッダー取得処理を元に戻す
3. バックエンドの認証APIを有効化

## 🛠️ トラブルシューティング

### ポートが使用中の場合
```bash
# ポート8000を停止
lsof -ti:8000 | xargs kill -9

# ポート3000/3001を停止
lsof -ti:3000 | xargs kill -9
lsof -ti:3001 | xargs kill -9
```

### データベースをリセットしたい場合
```bash
cd backend
rm uriv.db  # SQLiteデータベースファイルを削除
# バックエンドを再起動すると新しいDBが作成されます
```

---

**開発を楽しんでください！** 🎉

